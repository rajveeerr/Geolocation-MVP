/**
 * Hardcoded landing page deals matching Figma designs exactly.
 * Used when API returns no data and for detail page fallback.
 */
import type { Deal } from './deals';
import { premiumDeals, experiencesData } from './deals';

const getFutureDate = (hours: number) =>
  new Date(Date.now() + hours * 60 * 60 * 1000).toISOString();

const makeSocialProof = (count: number) => ({
  totalCount: count,
  visibleUsers: [
    { avatarUrl: 'https://i.pravatar.cc/80?img=12' },
    { avatarUrl: 'https://i.pravatar.cc/80?img=25' },
    { avatarUrl: 'https://i.pravatar.cc/80?img=33' },
  ],
});

// ─── STREET TACOS (Fast Food Friday) ───────────────────────────────
export const streetTacosDeals: Deal[] = [
  {
    id: 'st1',
    name: 'Earn Money for Every Friend',
    image: 'https://images.unsplash.com/photo-1565299624946-b28f40a0ae38?w=500&q=80',
    images: [
      'https://images.unsplash.com/photo-1565299624946-b28f40a0ae38?w=800&q=80',
      'https://images.unsplash.com/photo-1551504734-5ee1c4a1479b?w=800&q=80',
      'https://images.unsplash.com/photo-1599974579688-8dbdd335c77f?w=800&q=80',
      'https://images.unsplash.com/photo-1555400038-63f5ba517a47?w=800&q=80',
    ],
    rating: 4.6,
    category: 'STREET TACOS',
    price: '$$',
    location: '0.4 mi',
    dealType: 'Discount',
    dealValue: '38% OFF',
    originalValue: 4.0,
    discountPercentage: 38,
    discountAmount: null,
    expiresAt: getFutureDate(3),
    startTime: new Date(Date.now() - 1 * 60 * 60 * 1000).toISOString(),
    endTime: getFutureDate(3),
    merchantId: 1,
    merchantName: 'Taco Rebellion',
    claimedBy: makeSocialProof(3),
    bountyRewardAmount: 80,
  },
  {
    id: 'st2',
    name: '3 Tacos for $5 Deal',
    image: 'https://images.unsplash.com/photo-1513104890138-7c749659a591?w=500&q=80',
    images: [
      'https://images.unsplash.com/photo-1513104890138-7c749659a591?w=800&q=80',
      'https://images.unsplash.com/photo-1551504734-5ee1c4a1479b?w=800&q=80',
      'https://images.unsplash.com/photo-1599974579688-8dbdd335c77f?w=800&q=80',
    ],
    rating: 4.5,
    category: 'STREET TACOS',
    price: '$',
    location: '0.6 mi',
    dealType: 'Discount',
    dealValue: 'BOGO',
    originalValue: 8.0,
    discountPercentage: 40,
    discountAmount: null,
    expiresAt: getFutureDate(3),
    startTime: new Date(Date.now() - 1 * 60 * 60 * 1000).toISOString(),
    endTime: getFutureDate(3),
    merchantId: 2,
    merchantName: 'La Taqueria',
    claimedBy: makeSocialProof(7),
    bountyRewardAmount: 50,
  },
  {
    id: 'st3',
    name: '50% Off Al Pastor Special',
    image: 'https://images.unsplash.com/photo-1546833999-b9f581a1996d?w=500&q=80',
    images: [
      'https://images.unsplash.com/photo-1546833999-b9f581a1996d?w=800&q=80',
      'https://images.unsplash.com/photo-1551504734-5ee1c4a1479b?w=800&q=80',
      'https://images.unsplash.com/photo-1599974579688-8dbdd335c77f?w=800&q=80',
    ],
    rating: 4.7,
    category: 'STREET TACOS',
    price: '$$',
    location: '0.3 mi',
    dealType: 'Discount',
    dealValue: '50% OFF',
    originalValue: 12.0,
    discountPercentage: 50,
    discountAmount: null,
    expiresAt: getFutureDate(2.5),
    startTime: new Date(Date.now() + 2 * 60 * 60 * 1000).toISOString(),
    endTime: getFutureDate(2.5),
    merchantId: 3,
    merchantName: 'El Guapo',
    claimedBy: makeSocialProof(12),
    bountyRewardAmount: 60,
  },
  {
    id: 'st4',
    name: 'Bring Friends, Get Cash Back',
    image: 'https://images.unsplash.com/photo-1551504734-5ee1c4a1479b?w=500&q=80',
    images: [
      'https://images.unsplash.com/photo-1551504734-5ee1c4a1479b?w=800&q=80',
      'https://images.unsplash.com/photo-1565299624946-b28f40a0ae38?w=800&q=80',
      'https://images.unsplash.com/photo-1599974579688-8dbdd335c77f?w=800&q=80',
    ],
    rating: 4.8,
    category: 'STREET TACOS',
    price: '$$',
    location: '0.5 mi',
    dealType: 'Bounty Deal',
    dealValue: '$8 Per Friend',
    originalValue: 10.0,
    discountPercentage: 35,
    discountAmount: null,
    expiresAt: getFutureDate(3),
    startTime: new Date(Date.now() - 1 * 60 * 60 * 1000).toISOString(),
    endTime: getFutureDate(3),
    merchantId: 4,
    merchantName: 'Taqueria Del Sol',
    claimedBy: makeSocialProof(5),
    bountyRewardAmount: 80,
    minReferralsRequired: 5,
  },
];

// ─── WEEKEND ENERGY (DAY PASS: MAR 26) ─────────────────────────────
export const weekendEnergyDeals: Deal[] = [
  {
    id: 'we1',
    name: 'Earn Money for Every Friend',
    image: 'https://images.unsplash.com/photo-1470225620780-dba8ba36b745?w=500&q=80',
    images: [
      'https://images.unsplash.com/photo-1470225620780-dba8ba36b745?w=800&q=80',
      'https://images.unsplash.com/photo-1429962714451-bb934ecdc4ec?w=800&q=80',
      'https://images.unsplash.com/photo-1516450360452-9312f5e86fc7?w=800&q=80',
    ],
    rating: 4.2,
    category: 'DAY PASS: MAR 26',
    price: '$$$',
    location: '0.4 mi',
    dealType: 'Bounty Deal',
    dealValue: '$10 Per Friend',
    originalValue: 25.0,
    discountPercentage: 40,
    discountAmount: null,
    expiresAt: getFutureDate(4),
    startTime: getFutureDate(2.5),
    endTime: getFutureDate(4),
    merchantId: 1,
    merchantName: 'Club Electro',
    claimedBy: makeSocialProof(3),
    bountyRewardAmount: 80,
    minReferralsRequired: 8,
    statusText: '22 Jan 2026',
  },
  {
    id: 'we2',
    name: 'Buy One Book, Get One Free',
    image: 'https://images.unsplash.com/photo-1524995997946-a1c2e315a42f?w=500&q=80',
    images: [
      'https://images.unsplash.com/photo-1524995997946-a1c2e315a42f?w=800&q=80',
      'https://images.unsplash.com/photo-1507842217343-583bb7270b66?w=800&q=80',
      'https://images.unsplash.com/photo-1481627834876-b7833e8f5570?w=800&q=80',
    ],
    rating: 4.5,
    category: 'DAY PASS: MAR 26',
    price: '$$',
    location: '0.7 mi',
    dealType: 'Discount',
    dealValue: 'BOGO',
    originalValue: 20.0,
    discountPercentage: 50,
    discountAmount: null,
    expiresAt: getFutureDate(4),
    merchantId: 2,
    merchantName: 'Barnes & Noble',
    claimedBy: makeSocialProof(11),
    bountyRewardAmount: null,
    statusText: '22 Jan 2026',
  },
  {
    id: 'we3',
    name: 'VIP Night Pass 30% Off',
    image: 'https://images.unsplash.com/photo-1470225620780-dba8ba36b745?w=500&q=80',
    images: [
      'https://images.unsplash.com/photo-1470225620780-dba8ba36b745?w=800&q=80',
      'https://images.unsplash.com/photo-1514525253161-7a46d19cd819?w=800&q=80',
      'https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=800&q=80',
    ],
    rating: 4.3,
    category: 'DAY PASS: MAR 26',
    price: '$$$',
    location: '0.4 mi',
    dealType: 'Discount',
    dealValue: '30% OFF',
    originalValue: 40.0,
    discountPercentage: 30,
    discountAmount: null,
    expiresAt: getFutureDate(4),
    merchantId: 1,
    merchantName: 'Club Electro',
    claimedBy: makeSocialProof(19),
    bountyRewardAmount: 60,
    statusText: '22 Jan 2026',
  },
  {
    id: 'we4',
    name: 'Concert Early Access Deal',
    image: 'https://images.unsplash.com/photo-1459749411175-04bf5292ceea?w=500&q=80',
    images: [
      'https://images.unsplash.com/photo-1459749411175-04bf5292ceea?w=800&q=80',
      'https://images.unsplash.com/photo-1470225620780-dba8ba36b745?w=800&q=80',
      'https://images.unsplash.com/photo-1516450360452-9312f5e86fc7?w=800&q=80',
    ],
    rating: 4.6,
    category: 'DAY PASS: MAR 26',
    price: '$$$',
    location: '1.2 mi',
    dealType: 'Bounty Deal',
    dealValue: '$15 Per Friend',
    originalValue: 55.0,
    discountPercentage: 35,
    discountAmount: null,
    expiresAt: getFutureDate(4),
    merchantId: 3,
    merchantName: 'World Tour',
    claimedBy: makeSocialProof(6),
    bountyRewardAmount: 120,
    minReferralsRequired: 4,
    statusText: '22 Jan 2026',
  },
];

// ─── SELF-CARE MODE (TRIM TIME, GLOW SESSION, HAIR CUT, MANI DAY) ──
export const selfCareDeals: Deal[] = [
  {
    id: 'sc1',
    name: 'Hair Trim & Style Deal',
    image: 'https://images.unsplash.com/photo-1521590832167-7bcbfaa6381f?w=500&q=80',
    images: [
      'https://images.unsplash.com/photo-1521590832167-7bcbfaa6381f?w=800&q=80',
      'https://images.unsplash.com/photo-1560066984-138dadb4c035?w=800&q=80',
      'https://images.unsplash.com/photo-1605497788044-5a32c7078486?w=800&q=80',
      'https://images.unsplash.com/photo-1519699047748-de8e457a634e?w=800&q=80',
    ],
    rating: 4.6,
    category: 'TRIM TIME',
    price: '$$',
    location: '0.4 mi',
    dealType: 'Redeem Now',
    dealValue: '50% OFF',
    originalValue: 45.0,
    discountPercentage: 50,
    discountAmount: null,
    expiresAt: getFutureDate(4),
    startTime: new Date(Date.now() - 1 * 60 * 60 * 1000).toISOString(),
    endTime: getFutureDate(4),
    merchantId: 1,
    merchantName: 'Bubble Salon',
    claimedBy: makeSocialProof(3),
    bountyRewardAmount: 40,
    statusText: 'Opens at 9:00AM',
  },
  {
    id: 'sc2',
    name: 'Earn Money for Every Friend',
    image: 'https://images.unsplash.com/photo-1544161515-4ab6ce6db874?w=500&q=80',
    images: [
      'https://images.unsplash.com/photo-1544161515-4ab6ce6db874?w=800&q=80',
      'https://images.unsplash.com/photo-1515377905703-c4788e51af15?w=800&q=80',
      'https://images.unsplash.com/photo-1540555700478-4be289fbecef?w=800&q=80',
      'https://images.unsplash.com/photo-1507652313519-d4e9174996dd?w=800&q=80',
    ],
    rating: 4.8,
    category: 'GLOW SESSION',
    price: '$$$',
    location: '0.6 mi',
    dealType: 'Bounty Deal',
    dealValue: '$12 Per Friend',
    originalValue: 90.0,
    discountPercentage: 40,
    discountAmount: null,
    expiresAt: getFutureDate(3),
    startTime: new Date(Date.now() - 2 * 60 * 60 * 1000).toISOString(),
    endTime: getFutureDate(3),
    merchantId: 2,
    merchantName: 'Relay Spa',
    claimedBy: makeSocialProof(5),
    bountyRewardAmount: 80,
    minReferralsRequired: 4,
    statusText: 'Opens at 9:00AM',
  },
  {
    id: 'sc3',
    name: 'Fresh Fade Friday',
    image: 'https://images.unsplash.com/photo-1599351431202-1e0f0137899a?w=500&q=80',
    images: [
      'https://images.unsplash.com/photo-1599351431202-1e0f0137899a?w=800&q=80',
      'https://images.unsplash.com/photo-1622287162716-f311baa1a2b8?w=800&q=80',
      'https://images.unsplash.com/photo-1503951914875-452162b0f3f1?w=800&q=80',
      'https://images.unsplash.com/photo-1560066984-138dadb4c035?w=800&q=80',
    ],
    rating: 4.5,
    category: 'HAIR CUT',
    price: '$$',
    location: '0.3 mi',
    dealType: 'Redeem Now',
    dealValue: '35% OFF',
    originalValue: 35.0,
    discountPercentage: 35,
    discountAmount: null,
    expiresAt: getFutureDate(5),
    startTime: new Date(Date.now() - 1 * 60 * 60 * 1000).toISOString(),
    endTime: getFutureDate(5),
    merchantId: 3,
    merchantName: 'Rebel Barber',
    claimedBy: makeSocialProof(4),
    bountyRewardAmount: null,
    statusText: 'Opens at 9:00AM',
  },
  {
    id: 'sc4',
    name: 'Mani-Pedi Combo Special',
    image: 'https://images.unsplash.com/photo-1604654894610-df63bc536371?w=500&q=80',
    images: [
      'https://images.unsplash.com/photo-1604654894610-df63bc536371?w=800&q=80',
      'https://images.unsplash.com/photo-1512496015851-a90fb38ba796?w=800&q=80',
      'https://images.unsplash.com/photo-1522337360788-8b13dee7a37e?w=800&q=80',
      'https://images.unsplash.com/photo-1487412720507-e7ab37603c6f?w=800&q=80',
    ],
    rating: 4.7,
    category: 'MANI DAY',
    price: '$$',
    location: '0.5 mi',
    dealType: 'Redeem Now',
    dealValue: '45% OFF',
    originalValue: 55.0,
    discountPercentage: 45,
    discountAmount: null,
    expiresAt: getFutureDate(6),
    startTime: new Date(Date.now() - 30 * 60 * 1000).toISOString(),
    endTime: getFutureDate(6),
    merchantId: 4,
    merchantName: 'Nail Art Studio',
    claimedBy: makeSocialProof(8),
    bountyRewardAmount: 60,
    statusText: 'Opens at 9:00AM',
  },
];

// ─── Flat list for lookup (dedupe by id, landing sections take precedence) ──
const byId = new Map<string, Deal>();
for (const d of [...streetTacosDeals, ...weekendEnergyDeals, ...selfCareDeals]) {
  byId.set(d.id, d);
}
for (const d of [...premiumDeals, ...experiencesData]) {
  if (!byId.has(d.id)) byId.set(d.id, d);
}
const allLandingDeals = Array.from(byId.values());

/** Look up a deal by ID from hardcoded landing data. Used when API returns 404. */
export function getLandingDealById(id: string | undefined): Deal | null {
  if (!id) return null;
  return allLandingDeals.find((d) => d.id === id) ?? null;
}
